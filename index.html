<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ultra Smart OS</title>

<style>
/* ===============================
   1. RESET & CORE
================================ */
* { margin: 0; padding: 0; box-sizing: border-box; }

html, body {
    width: 100%;
    height: 100%;
    overflow: hidden;
    font-family: system-ui, sans-serif;
    background: #0f0f0f;
}

/* ===============================
   2. WALLPAPER ENGINE
================================ */
#wallpaper-engine {
    position: fixed;
    inset: 0;
    z-index: -1;
}

.wallpaper {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;      /* ðŸ”¥ mobile + desktop fit */
    object-position: center;
    opacity: 0;
    transition: opacity 0.6s ease;
}

.wallpaper.active {
    opacity: 1;
}

/* ===============================
   3. UI CONTROLS
================================ */
#control-bar {
    position: fixed;
    top: 16px;
    right: 16px;
    z-index: 10;
}

#pick-btn {
    width: 44px;
    height: 44px;
    border-radius: 50%;
    border: none;
    background: rgba(255,255,255,0.12);
    backdrop-filter: blur(8px);
    cursor: pointer;
    display: grid;
    place-items: center;
}

#pick-btn svg {
    width: 22px;
    height: 22px;
    fill: #fff;
}

#pick-btn:hover {
    background: rgba(255,255,255,0.25);
}

/* ===============================
   4. TOAST
================================ */
#toast {
    position: fixed;
    bottom: 24px;
    left: 50%;
    transform: translateX(-50%);
    padding: 10px 18px;
    background: rgba(0,0,0,0.75);
    color: #fff;
    font-size: 14px;
    border-radius: 20px;
    opacity: 0;
    transition: opacity 0.3s ease;
    pointer-events: none;
    z-index: 20;
}

/* ===============================
   5. MOBILE SAFETY
================================ */
@media (max-width: 600px) {
    #pick-btn {
        width: 48px;
        height: 48px;
    }
}
</style>
</head>

<body>

<!-- =============================
     WALLPAPER ENGINE
============================= -->
<div id="wallpaper-engine">
    <img id="img-wall" class="wallpaper" />
    <video id="vid-wall" class="wallpaper" muted loop playsinline></video>
</div>

<!-- =============================
     CONTROLS
============================= -->
<div id="control-bar">
    <button id="pick-btn" title="Change Wallpaper">
        <svg viewBox="0 0 24 24">
            <path d="M12 8a4 4 0 100 8 4 4 0 000-8zm8.94 4a6.96 6.96 0 00-.12-1l2.1-1.63-2-3.46-2.48 1a7.1 7.1 0 00-1.72-1l-.38-2.65h-4l-.38 2.65a7.1 7.1 0 00-1.72 1l-2.48-1-2 3.46L5.18 11a7.96 7.96 0 000 2l-2.1 1.63 2 3.46 2.48-1a7.1 7.1 0 001.72 1l.38 2.65h4l.38-2.65a7.1 7.1 0 001.72-1l2.48 1 2-3.46L18.82 13a6.96 6.96 0 00.12-1z"/>
        </svg>
    </button>
</div>

<input type="file" id="file-input" accept="image/*,video/*" hidden>
<div id="toast"></div>

<!-- =============================
     CORE SCRIPT
============================= -->
<script>
const pickBtn = document.getElementById('pick-btn');
const fileInput = document.getElementById('file-input');
const imgWall = document.getElementById('img-wall');
const vidWall = document.getElementById('vid-wall');
const toast = document.getElementById('toast');

/* ---------- UI ---------- */
pickBtn.onclick = () => fileInput.click();

/* ---------- LOAD SAVED ---------- */
window.addEventListener('load', () => {
    const type = localStorage.getItem('wall-type');
    const data = localStorage.getItem('wall-data');

    if (!type || !data) return;

    if (type === 'image') applyImage(data);
    if (type === 'video') applyVideo(data);
});

/* ---------- PICK FILE ---------- */
fileInput.onchange = e => {
    const file = e.target.files[0];
    if (!file) return;

    if (file.type.startsWith('video/') && file.size > 3.5 * 1024 * 1024) {
        showToast("Video max 3.5MB allowed");
        return;
    }

    const reader = new FileReader();
    reader.onload = () => {
        if (file.type.startsWith('image/')) {
            localStorage.setItem('wall-type','image');
            localStorage.setItem('wall-data', reader.result);
            applyImage(reader.result);
        } else {
            localStorage.setItem('wall-type','video');
            localStorage.setItem('wall-data', reader.result);
            applyVideo(reader.result);
        }
    };
    reader.readAsDataURL(file);
};

/* ---------- APPLY ---------- */
function applyImage(src) {
    imgWall.src = src;
    imgWall.classList.add('active');
    vidWall.classList.remove('active');
    vidWall.pause();
    showToast("Wallpaper applied");
}

function applyVideo(src) {
    vidWall.src = src;
    vidWall.classList.add('active');
    imgWall.classList.remove('active');
    vidWall.play();
    showToast("Live wallpaper applied");
}

/* ---------- TOAST ---------- */
function showToast(msg) {
    toast.textContent = msg;
    toast.style.opacity = 1;
    setTimeout(() => toast.style.opacity = 0, 2500);
}
</script>

</body>
</html>
